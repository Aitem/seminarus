Monitoring Aidbox + K8S
FHIR denormalization
FHIR Aidbox PostgreSQL tips and trics
Audit/ui_audit



# Monitoring Seminar

- У кого есть production?
- У кого есть мониторинг
- Как и зачем используете


Зачем? что будет без мониторинга?

Зачем разработчику?           debug
Зачем бизнесу/закачкику?      продажи
Зачем пользователя системы?   аудит
Зачем админам?                поддерживать работоспособность/предупреждение



## Откуда берутся данные?
exporters and appenders logstash - может дополнять

## С чего начать?
Prometheus operator https://github.com/prometheus-operator/prometheus-operator
Только метрики железа и показатели кластера

## Дальше логи
Где хранить логи? ES

Aidbox -> График ->>>>> показать что легко стартануть


Чем выводить - grafana
чем собирать - klog (logstash)
Интеграция и сбор - eppender (logstash) , hardware - prometheus & prometheus operator

Инструментарий
  что есть еще?
  prometheus
  es
  esappender
  grafana
  kibana
  pg

Мониторинг
Что мониторить?
Какие метрики?
Как долго хранить (Ротация логов)



## Прозрения

Что не существует изолированных метрик железа и приложения, работает только все в купе разом
Среднее и масимальное - а надо было суммарное и количество


1) Метрики железа (cpu, hdd, ram, iops, iotime, net)
2) Access log - тупо логирование http и db запросов
3) Audit log - бизнес логический лог
4) Alerting - наблюдение за целевыми метриками



Типы данных - исторические, single stat ..
Типы графиков и визуализации

Логирование
UI логирование corr_id && ctx (debug)
DIFF



## Award
  UI loging (audit)


## Совет

Если есть прод и нет ничего, накатите хотябы pingdom

Количество пользователей онлайн
Чем раньше тем лучше

# Вопросики

Как правильно настроить и задеплоить графану, прометеус и кибану/эластик с айдбоксом.
Что именно нужно мониторить? Как понять какие метрики важны? Как их правильно интерпретировать? Что с алертами?
Про инструменты - что помогает от аномалии на графике прийти к коду/запросу который ее вызвал или был причиной?
Как смотреть за загрузкой машин, дисков, нод в кластере?

Как собираются/логируются/алертятся/анализируются ошибки/экспешноны?
